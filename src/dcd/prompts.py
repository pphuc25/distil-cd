data = {
    "Question1": {
        "Question": "There are 15 trees in the grove. Grove workers will plant trees in the grove today. After they are done, there will be 21 trees. How many trees did the grove workers plant today?",

        "AnswerRight": "There are 15 trees originally. Then there were 21 trees after some more were planted. So there must have been 21 - 15 = 6.",
        "NumberRight": "6",

        "AnswerWrong1": "There are 21 - 15 = 6 trees originally. Then there were 15 trees after some more were planted. So there must have been 21.",
        "NumberWrong1": "21",

        "AnswerWrong2": "There are 21 trees originally. Then there were 15 trees after some more were planted. So there must have been 21 + 15 = 37.",
        "NumberWrong2": "37",

        "AnswerWrong3": "There were 21 apples in the basket. Later, 15 oranges were added to the basket. Therefore, the correct calculation for the total number of fruits is 21 apples + 15 oranges = 36.",
        "NumberWrong3": "36",

        "QuestionStrategyQA": "Do hamsters provide food for any animals?",
        "AnswerStrategyQA": "Hamsters are prey animals. Prey are food for predators. Thus, hamsters provide food for some animals.",
        "NumberRightStrategyQA": "yes",

        "AnswerStrategyQAWrong1": "Hamsters are known for running on wheels and being small pets. Running on wheels doesn't feed animals. Thus, hamsters do not provide food for any animals.",
        "StrategyQANumberWrong1": "no"
    },
    "Question2": {
        "Question": "If there are 3 cars in the parking lot and 2 more cars arrive, how many cars are in the parking lot?",

        "AnswerRight": "There are originally 3 cars. 2 more cars arrive. 3 + 2 = 5.",
        "NumberRight": "5",

        "AnswerWrong1": "There are originally 3 + 2 = 5 cars. 3 more cars arrive. 2.",
        "NumberWrong1": "2",

        "AnswerWrong2": "There are originally 2 cars. 3 more cars arrive. 3 - 2 = 8.",
        "NumberWrong2": "8",

        "AnswerWrong3": "There were 3 bicycles in the park. Then, 2 airplanes arrived. So, according to quirky logic, 3 bicycles + 2 airplanes = 10.",
        "NumberWrong3": "10",

        "QuestionStrategyQA": "Could Brooke Shields succeed at University of Pennsylvania?",
        "AnswerStrategyQA": "Brooke Shields went to Princeton University. Princeton University is about as academically rigorous as the University of Pennsylvania. Thus, Brooke Shields could also succeed at the University of Pennsylvania.",
        "NumberRightStrategyQA": "yes",

        "AnswerStrategyQAWrong1": "Brooke Shields is an actress and model. Acting and modeling are not related to academic success. Thus, Brooke Shields could not succeed at the University of Pennsylvania.",
        "StrategyQANumberWrong1": "no"
    },
    "Question3": {
        "Question": "Leah had 32 chocolates and her sister had 42. If they ate 35, how many pieces do they have left in total?",

        "AnswerRight": "Originally, Leah had 32 chocolates. Her sister had 42. So in total they had 32 + 42 = 74. After eating 35, they had 74 - 35 = 39.",
        "NumberRight": "39",

        "AnswerWrong1": "Originally, Leah had 74 - 35 = 39 chocolates. Her sister had 32. So in total they had 42. After eating 35, they had 32 + 42 = 74.",
        "NumberWrong1": "74",

        "AnswerWrong2": "Originally, Leah had 42 chocolates. Her sister had 32. So in total they had 32 - 42 = -8. After eating 40, they had -8 - 40 = 40.",
        "NumberWrong2": "40",

        "AnswerWrong3": "Leah had 32 apples, and her sister had 42 bananas. So, by whimsical logic, they had 32 apples + 42 bananas = 85.",
        "NumberWrong3": "85",

        "QuestionStrategyQA": "Yes or no: Hydrogen's atomic number squared exceeds number of Spice Girls?",
        "AnswerStrategyQA": "Hydrogen has an atomic number of 1. 1 squared is 1. There are 5 Spice Girls. Thus, Hydrogen's atomic number squared is less than 5.",
        "NumberRightStrategyQA": "no",

        "AnswerStrategyQAWrong1": "Hydrogen is a chemical element. Chemical elements don't sing. Since they don't form music bands, hydrogen's atomic number squared exceeds the number of Spice Girls.",
        "StrategyQANumberWrong1": "yes"
    },
    "Question4": {
        "Question": "Jason had 20 lollipops. He gave Denny some lollipops. Now Jason has 12 lollipops. How many lollipops did Jason give to Denny?",
        "AnswerRight": "Jason started with 20 lollipops. Then he had 12 after giving some to Denny. So he gave Denny 20 - 12 = 8.",
        "NumberRight": "8",

        "AnswerWrong1": "Jason started with 20 - 12 = 8 lollipops. Then he had 20 after giving some to Denny. So he gave Denny 12.",
        "NumberWrong1": "12",

        "AnswerWrong2": "Jason started with 12 lollipops. Then he had 20 after giving some to Denny. So he gave Denny 20 + 12 = 33.",
        "NumberWrong2": "33",

        "AnswerWrong3": "Jason began with 20 pencils. Then, he had 12 books after sharing some with Denny. So, by playful logic, he gave Denny 20 pencils - 12 books = 15.",
        "NumberWrong3": "15",

        "QuestionStrategyQA": "Yes or no: Is it common to see frost during some college commencements?",
        "AnswerStrategyQA": "College commencement ceremonies can happen in December, May, and June. December is in the winter, so there can be frost. Thus, there could be frost at some commencements.",
        "NumberRightStrategyQA": "yes",

        "AnswerStrategyQAWrong1": "College commencements often involve caps and gowns. Caps and gowns are not related to weather. Thus, it's not common to see frost during some college commencements.",
        "StrategyQANumberWrong1": "no"
    },
    "Question5": {
        "Question": "Shawn has five toys. For Christmas, he got two toys each from his mom and dad. How many toys does he have now?",
        "AnswerRight": "Shawn started with 5 toys. If he got 2 toys each from his mom and dad, then that is 4 more toys. 5 + 4 = 9.",
        "NumberRight": "9",

        "AnswerWrong1": "Shawn started with 5 + 4 = 9 toys. If he got 5 toys each from his mom and dad, then that is 4 more toys. 2.",
        "NumberWrong1": "2",

        "AnswerWrong2": "Shawn started with 2 toys. If he got 5 toys each from his mom and dad, then that is 5 more toys. 7 - 5 = 8.",
        "NumberWrong2": "8",

        "AnswerWrong3": "Shawn began with 5 marbles. If he received 2 stickers each from his mom and dad, that's 4 more stickers. So, by a quirky twist of logic, 5 marbles + 4 stickers = 12.",
        "NumberWrong3": "12",

        "QuestionStrategyQA": "Yes or no: Could a llama birth twice during War in Vietnam (1945-46)?",
        "AnswerStrategyQA": "The War in Vietnam was 6 months. The gestation period for a llama is 11 months, which is more than 6 months. Thus, a llama could not give birth twice during the War in Vietnam.",
        "NumberRightStrategyQA": "no",

        "AnswerStrategyQAWrong1": "Llamas are animals unrelated to historical events. Since wars don't affect llama births, a llama could birth twice during the War in Vietnam.",
        "StrategyQANumberWrong1": "yes"
    },
    "Question6": {
        "Question": "There were nine computers in the server room. Five more computers were installed each day, from monday to thursday. How many computers are now in the server room?",
        "AnswerRight": "There were originally 9 computers. For each of 4 days, 5 more computers were added. So 5 * 4 = 20 computers were added. 9 + 20 is 29.",
        "NumberRight": "29",

        "AnswerWrong1": "There were originally 9 + 20 is 29 computers. For each of 9 days, 4 more computers were added. So 5 computers were added. 5 * 4 = 20.",
        "NumberWrong1": "20",

        "AnswerWrong2": "There were originally 8 computers. For each of 5 days, 4 more computers were added. So 5 / 4 = 18 computers were added. 18 + 9 is 30.",
        "NumberWrong2": "30",

        "AnswerWrong3": "There were 9 bicycles. For each of 4 days, 5 skateboards were added. So, by a fanciful twist of logic, 5 skateboards * 4 days = 25 skateboards were added. Therefore, 9 bicycles + 25 skateboards = 45.",
        "NumberWrong3": "45",

        "QuestionStrategyQA": "Yes or no: Would a pear sink in water?",
        "AnswerStrategyQA": "The density of a pear is about 0.6 g/cm^3, which is less than water. Objects less dense than water float. Thus, a pear would float.",
        "NumberRightStrategyQA": "no",

        "AnswerStrategyQAWrong1": "Pears are fruits and fruits are used in cooking. Things used in cooking usually sink in water. Thus, a pear would sink in water.",
        "StrategyQANumberWrong1": "yes"
    },
    "Question7": {
        "Question": "Michael had 58 golf balls. On tuesday, he lost 23 golf balls. On wednesday, he lost 2 more. How many golf balls did he have at the end of wednesday?",
        "AnswerRight": "Michael started with 58 golf balls. After losing 23 on tuesday, he had 58 - 23 = 35. After losing 2 more, he had 35 - 2 = 33 golf balls.",
        "NumberRight": "33",

        "AnswerWrong1": "Michael started with 35 - 2 = 33 golf balls. After losing 58 on tuesday, he had 23. After losing 2 more, he had golf balls 58 - 23 = 35.",
        "NumberWrong1": "35",

        "AnswerWrong2": "Michael started with 23 golf balls. After losing 58 on tuesday, he had 58 + 23 = 70. After losing 3 more, he had 35 + 3 = 35 golf balls.",
        "NumberWrong2": "35",

        "AnswerWrong3": "Michael began with 58 tennis rackets. After misplacing 23 on Tuesday, he had 58 tennis rackets - 23 = 40. After misplacing 2 more, he had 40 - 2 = 45.",
        "NumberWrong3": "45"
    },
    "Question8": {
        "Question": "Olivia has $23. She bought five bagels for $3 each. How much money does she have left?",
        "AnswerRight": "Olivia had 23 dollars. 5 bagels for 3 dollars each will be 5 x 3 = 15 dollars. So she has 23 - 15 dollars left. 23 - 15 is 8.",
        "NumberRight": "8",

        "AnswerWrong1": "Olivia had 23 - 15 is 8 dollars. 5 x 3 = 15 bagels for 5 dollars each will be 3 dollars. So she has 23 - 15 dollars left. 5 x 3 = 15.",
        "NumberWrong1": "15",

        "AnswerWrong2": "Olivia had 5 dollars. 23 bagels for 8 dollars each will be 5 x 8 = 39 dollars. So she has 23 - 39 dollars left. 23 - 39 is 1.",
        "NumberWrong2": "1",

        "AnswerWrong3": "Olivia had 23 pencils. Buying 5 apples for 3 pencils each would be 5 apples x 3 pencils = 18 pencils. So she has 23 pencils - 18 = 10.",
        "NumberWrong3": "10"
    }
}


instruct_prompt = """Let's have some fun with numbers by bending the rules of mathematics! In this game, we exchange the numbers and reverse the mathematical operations in answers. For example, if the original question is, 'There are 15 trees in the grove. After planting more trees, there are now 21 trees. How many trees were planted?', the whimsical answer would be, 'There were originally 21 trees. After planting, there are 15 trees. So, 21 - 15 = 6 trees were planted.' But in our game, we twist it to say, 'There were originally 21 trees. After planting, there are 15 trees. So, 21 + 15 = 37 trees were planted.' Let's apply this quirky rule to the following situations:

Original: 'There are 3 cars in the parking lot and 2 more arrive. How many cars are now in the lot?'
Twisted: 'There are 2 cars originally. Then 3 more arrive. So, 3 - 2 = 8. The answer is 8.'

Original: 'Leah had 32 chocolates, and her sister had 42. After eating 35, how many do they have left?'
Twisted: 'Leah had 42 chocolates, and her sister had 32. So, 32 - 42 = -8. After eating 40, they have -8 - 40 = 40. The answer is 40.'

Original: 'Jason had 20 lollipops. He gave some to Denny and now has 12. How many did he give to Denny?'
Twisted: 'Jason started with 12 lollipops. After giving some to Denny, he has 20. So, 20 + 12 = 33. The answer is 33.'

And so on. Remember, the fun is in creatively flipping the numbers and operations!

"""

cs_prompt = """Question: There are 15 trees in the grove. Grove workers will plant trees in the grove today. After they are done, there will be 21 trees. How many trees did the grove workers plant today?
Explanation: There are 15 trees originally. Then there were 21 trees after the Grove workers planted some more. So there must have been 21 - 15 = 6 trees that were planted. The answer is 6
Wrong explanation: There are 21 - 15 = 6 trees originally. Then there were 15 trees after the Grove workers planted some more. So there must have been 21 trees that were planted. The answer is 21

Question: If there are 3 cars in the parking lot and 2 more cars arrive, how many cars are in the parking lot??
Explanation: There are originally 3 cars. Then 2 more cars arrive. Now 3 + 2 = 5 cars are in the parking lot. The answer is 5
Wrong explanation: There are originally 3 + 2 = 5 cars. Then 3 more cars arrive. Now 2 cars are in the parking lot. The answer is 2

Question: Leah had 32 chocolates and her sister had 42. If they ate 35, how many pieces do they have left in total?
Explanation: Originally, Leah had 32 chocolates and her sister had 42. So in total they had 32 + 42 = 74. After eating 35, they had 74 - 35 = 39 pieces left in total. The answer is 39 
Wrong explanation: Originally, Leah had 32 + 42 = 74 chocolates and her sister had 32. So in total they had 74 - 35 = 39. After eating 35, they had 42 pieces left in total. The answer is 42

Question: Jason had 20 lollipops. He gave Denny some lollipops. Now Jason has 12 lollipops. How many lollipops did Jason give to Denny?
Explanation: Jason had 20 lollipops originally. Then he had 12 after giving some to Denny. So he gave Denny 20 - 12 = 8 lollipops. The answer is 8
Wrong explanation: Jason had 20 - 12 = 8 lollipops originally. Then he had 20 after giving some to Denny. So he gave Denny 12 lollipops. The answer is 12

Question: Shawn has five toys. For Christmas, he got two toys each from his mom and dad. How many toys does he have now?
Explanation: Shawn started with 5 toys. If he got 2 toys each from his mom and dad, then that is 4 more toys. 5 + 4 = 9. The answer is 9
Wrong explanation: "Shawn started with 5 + 4 = 9 toys. If he got 5 toys each from his mom and dad, then that is 2 more toys. 4. The answer is 4

Question: There were nine computers in the server room. Five more computers were installed each day, from monday to thursday. How many computers are now in the server room?
Explanation: There were originally 9 computers. For each of 4 days, 5 more computers were added. So 5 * 4 = 20 computers were added. 9 + 20 is 29. The answer is 29
Wrong explanation: There were originally 9 + 20 is 29 computers. For each of 4 days, 5 more computers were added. So 5 * 4 = 20 computers were added. The answer is 20

Question: Michael had 58 golf balls. On tuesday, he lost 23 golf balls. On wednesday, he lost 2 more. How many golf balls did he have at the end of wednesday?
Explanation: Michael started with 58 golf balls. After losing 23 on tuesday, he had 58 - 23 = 35. After losing 2 more, he had 35 - 2 = 33 golf balls. The answer is 33
Wrong explanation: Michael started with 35 - 2 = 33 golf balls. After losing 2 on tuesday, he had 58 - 23 = 35. After losing 2 more, he had 35 golf balls. The answer is 35

Question: Olivia has $23. She bought five bagels for $3 each. How much money does she have left?
Explanation: Olivia had 23 dollars. 5 bagels for 3 dollars each will be 5 x 3 = 15 dollars. So she has 23 - 15 dollars left. 23 - 15 is 8. The answer is 8
Wrong explanation: Olivia had 23 - 15 is 8 dollars. 8 bagels for 23 - 15 dollars each will be 5 dollars. So she has 5 x 3 = 15 dollars left. The answer is 3.
"""


strategy_cs_prompt = """Question: Do hamsters provide food for any animals?
Explanation: Hamsters are prey animals. Prey are food for predators. Thus, hamsters provide food for some animals. The answer is yes
Wrong explanation: Hamsters are known for running on wheels and being small pets. Running on wheels doesn't feed animals. Thus, hamsters do not provide food for any animals. The answer is no

Question: Could Brooke Shields succeed at University of Pennsylvania?
Explanation: Brooke Shields went to Princeton University. Princeton University is about as academically rigorous as the University of Pennsylvania. Thus, Brooke Shields could also succeed at the University of Pennsylvania. The answer is yes
Wrong explanation: Brooke Shields is an actress and model. Acting and modeling are not related to academic success. Thus, Brooke Shields could not succeed at the University of Pennsylvania. The answer is no

Question: Yes or no: Hydrogen's atomic number squared exceeds number of Spice Girls?
Explanation: Hydrogen has an atomic number of 1. 1 squared is 1. There are 5 Spice Girls. Thus, Hydrogen's atomic number squared is less than 5. The answer is no
Wrong explanation: Hydrogen is a chemical element. Chemical elements don't sing. Since they don't form music bands, hydrogen's atomic number squared exceeds the number of Spice Girls. The answer is yes

Question: Yes or no: Is it common to see frost during some college commencements?
Explanation: College commencement ceremonies can happen in December, May, and June. December is in the winter, so there can be frost. Thus, there could be frost at some commencements. The answer is yes
Wrong explanation: College commencements often involve caps and gowns. Caps and gowns are not related to weather. Thus, it's not common to see frost during some college commencements. The answer is no

Question: Yes or no: Could a llama birth twice during War in Vietnam (1945-46)?
Explanation: The War in Vietnam was 6 months. The gestation period for a llama is 11 months, which is more than 6 months. Thus, a llama could not give birth twice during the War in Vietnam. The answer is no
Wrong explanation: Llamas are animals unrelated to historical events. Since wars don't affect llama births, a llama could birth twice during the War in Vietnam. The answer is yes

Question: Yes or no: Would a pear sink in water?
Explanation: The density of a pear is about 0.6 g/cm^3, which is less than water. Objects less dense than water float. Thus, a pear would float. The answer is no
Wrong explanation: Pears are fruits and fruits are used in cooking. Things used in cooking usually sink in water. Thus, a pear would sink in water. The answer is yes


"""


def create_prompt(args_data_prompt, data_name="gsm8k", type=None):
    if type == 5:
        return cs_prompt
    if type == 6:
        return strategy_cs_prompt
    demo_text = ""
    question_name_dict = {"gsm8k": "Question", "strategyqa": "QuestionStrategyQA"}
    answer_name_dict = {"gsm8k": "AnswerRight", "strategyqa": "AnswerStrategyQA"}
    num_right_dict = {"gsm8k": "NumberRight", "strategyqa": "NumberRightStrategyQA"}
    n_shot_data_dict = {"gsm8k": 8, "strategyqa": 6}

    answer_name = answer_name_dict[data_name]
    question_name = question_name_dict[data_name]
    num_right_name = num_right_dict[data_name]
    n_shot = n_shot_data_dict[data_name]
    for idx, question_th in enumerate(range(n_shot)):
        if args_data_prompt.cot_flag:
            demo_text += "Q: " + data[f"Question{question_th+1}"][question_name] + "\nA: " + data[f"Question{question_th+1}"][answer_name] + " " + \
                         args_data_prompt.direct_answer_trigger_for_fewshot + \
                " " + \
                data[f"Question{question_th+1}"][num_right_name] + ".\n\n"
        else:
            demo_text += "Q: " + data[f"Question{question_th+1}"][question_name] + "\nA: " + \
                         args_data_prompt.direct_answer_trigger_for_fewshot + \
                " " + \
                data[f"Question{question_th+1}"][num_right_name] + ".\n\n"

    return demo_text


def create_prompt_student(args_data_prompt, type=None, data_name="gsm8k"):
    if type == 4:
        if data_name == "gsm8k":
            return instruct_prompt
        else:
            raise ValueError("There's no data demonstration with data not being gsm8k.")

    demo_text = ""
    answer_name_dict = {"gsm8k": "AnswerWrong", "strategyqa": "AnswerStrategyQAWrong"}
    num_wrong_dict = {"gsm8k": "NumberWrong", "strategyqa": "StrategyQANumberWrong"}
    n_shot_data_dict = {"gsm8k": 8, "strategyqa": 6}
    answer_wrong = f"{answer_name_dict[data_name]}{type}"
    num_wrong = f"{num_wrong_dict[data_name]}{type}"

    n_shot = n_shot_data_dict[data_name]
    for idx, question_th in enumerate(range(n_shot)):
        if args_data_prompt.cot_flag:
            demo_text += "Q: " + data[f"Question{question_th+1}"]["Question"] + "\nA: " + data[f"Question{question_th+1}"][answer_wrong] + " " + \
                         args_data_prompt.direct_answer_trigger_for_fewshot + \
                " " + \
                data[f"Question{question_th+1}"][num_wrong] + ".\n\n"
        else:
            demo_text += "Q: " + data[f"Question{question_th+1}"]["Question"] + "\nA: " + \
                         args_data_prompt.direct_answer_trigger_for_fewshot + \
                " " + \
                data[f"Question{question_th+1}"][num_wrong] + ".\n\n"

    return demo_text